{"version":3,"sources":["../../../../src/api/middlewares/token/index.js"],"names":["YuyuidError","decodeJwtToken","Request","Response","NextFunction","verifyToken","req","res","next","result","body","token","badData","Reflect","set","userId","err"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,mBAAxB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,YAA5B,QAAgD,SAAhD;;AAEA;;;;;;AAMA,MAAMC,cAAc,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;AAC1C,QAAI;AACA,cAAMC,SAASR,eAAeK,IAAII,IAAJ,CAASC,KAAxB,CAAf;AACA,YAAI,CAACF,MAAL,EAAa,MAAMT,YAAYY,OAAZ,CAAoB,eAApB,CAAN;AACbC,gBAAQC,GAAR,CAAYR,IAAII,IAAhB,EAAsB,QAAtB,EAAgCD,OAAOM,MAAvC;AACA,eAAOP,MAAP;AACH,KALD,CAKE,OAAOQ,GAAP,EAAY;AACV,eAAOR,KAAKQ,GAAL,CAAP;AACH;AACJ,CATD;;AAWA,eAAeX,WAAf","file":"index.js","sourcesContent":["import YuyuidError from \"@yuyuid/exception\";\r\nimport { decodeJwtToken } from \"@yuyuid/utils\";\r\nimport { Request, Response, NextFunction } from \"express\";\r\n\r\n/**\r\n *\r\n * @param {Request} req request\r\n * @param {Response} res response\r\n * @param {NextFunction} next next function\r\n */\r\nconst verifyToken = async (req, res, next) => {\r\n    try {\r\n        const result = decodeJwtToken(req.body.token);\r\n        if (!result) throw YuyuidError.badData(\"Invalid Token\");\r\n        Reflect.set(req.body, \"userId\", result.userId);\r\n        return next();\r\n    } catch (err) {\r\n        return next(err);\r\n    }\r\n};\r\n\r\nexport default verifyToken;\r\n"]}