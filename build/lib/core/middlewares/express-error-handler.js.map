{"version":3,"sources":["../../../../src/lib/core/middlewares/express-error-handler.js"],"names":["YuyuidError","isCelebrateError","expressErrorHandler","err","req","res","next","status","message","errors","errorObject","error","name","Boom","output","payload","statusCode"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,mBAAxB;AACA,SAAQC,gBAAR,QAAgC,WAAhC;;AAEA,MAAMC,sBAAsB,CAACC,GAAD,EAAKC,GAAL,EAASC,GAAT,EAAaC,IAAb,KAAqB;AAC7C,UAAM,EAAEC,MAAF,EAAUC,OAAV,EAAmBC,MAAnB,KAA8BN,GAApC;AACA,UAAMO,cAAc;AAChBH,gBAASA,UAAU,GADH;AAEhBC,eAFgB;AAGhBG,eAAOR;AAHS,KAApB;;AAMA,QAAIA,IAAIS,IAAJ,KAAa,mBAAjB,EAAqC;AACjCF,oBAAYC,KAAZ,GAAoB,8CAApB;AACH,KAFD,MAEM,IAAIR,eAAeH,YAAYa,IAA/B,EAAoC;AACtCH,oBAAYC,KAAZ,GAAoBR,IAAIW,MAAJ,CAAWC,OAAX,CAAmBJ,KAAvC;AACAD,oBAAYH,MAAZ,GAAqBJ,IAAIW,MAAJ,CAAWE,UAAhC;AACH,KAHK,MAGC,IAAGb,IAAIS,IAAJ,KAAa,iBAAhB,EAAkC;AACrCF,oBAAYC,KAAZ,GAAoB,mBAApB;AACAD,oBAAYH,MAAZ,GAAqB,GAArB;AACH,KAHM,MAGA,IAAIN,iBAAiBE,GAAjB,CAAJ,EAA0B;AAC7BO,oBAAYC,KAAZ,GAAoB,mBAApB;AACH;AACD,WAAON,IAAIE,MAAJ,CAAWG,YAAYH,MAAvB,EAA+BI,KAA/B,CAAqCD,WAArC,CAAP;;AAEAJ;AACH,CAtBD;;AAwBA,eAAeJ,mBAAf","file":"express-error-handler.js","sourcesContent":["import YuyuidError from '@yuyuid/exception';\r\nimport {isCelebrateError } from \"celebrate\";\r\n\r\nconst expressErrorHandler = (err,req,res,next)=> {\r\n    const { status, message, errors } = err\r\n    const errorObject = {\r\n        status : status || 500,\r\n        message,\r\n        error: err,\r\n    }\r\n\r\n    if (err.name === \"UnauthorizedError\"){\r\n        errorObject.error = \"You don't have permission to do that. Sorry!\";\r\n    }else if (err instanceof YuyuidError.Boom){\r\n        errorObject.error = err.output.payload.error;\r\n        errorObject.status = err.output.statusCode;\r\n    } else if(err.name === \"ValidationError\"){\r\n        errorObject.error = \"Validation Failed\";\r\n        errorObject.status = 400;\r\n    } else if (isCelebrateError(err)){\r\n        errorObject.error = \"Validation Failed\";\r\n    }\r\n    return res.status(errorObject.status).error(errorObject)\r\n\r\n    next()\r\n}\r\n\r\nexport default expressErrorHandler\r\n"]}