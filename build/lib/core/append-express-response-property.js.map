{"version":3,"sources":["../../../src/lib/core/append-express-response-property.js"],"names":["AppendExpressResponseProperty","transformSuccessBody","res","body","message","Reflect","deleteProperty","transformedBody","status","statusCode","success","requestTime","Date","getTime","data","transformErrorBody","error","appendSuccess","req","next","json","old","bind","appendError","ResponseProperty"],"mappings":"AAAA,MAAMA,6BAAN,CAAoC;AAChCC,yBAAqBC,GAArB,EAAyBC,OAAO,EAAhC,EAAmC;AAC/B,cAAMC,UAAUD,KAAKC,OAArB;AACAC,gBAAQC,cAAR,CAAuBH,IAAvB,EAA4B,SAA5B;;AAEA,cAAMI,kBAAkB;AACpBC,oBAAQN,IAAIO,UADQ;AAEpBC,qBAAS,IAFW;AAGpBN,mBAHoB;AAIpBO,yBAAa,IAAIC,IAAJ,GAAWC,OAAX,EAJO;AAKpBC,kBAAMX,KAAKW,IAAL,GAAWX,KAAKW,IAAhB,GAAuBX;AALT,SAAxB;AAOA,eAAOI,eAAP;AACH;;AAEDQ,uBAAmBb,GAAnB,EAAuBC,IAAvB,EAA4B;AACxB,cAAM,EAACK,MAAD,EAAQJ,OAAR,EAAgBY,KAAhB,KAAyBb,IAA/B;AACA,cAAMI,kBAAkB;AACpBC,kBADoB;AAEpBE,qBAAS,IAFW;AAGpBN,mBAHoB;AAIpBY,iBAJoB;AAKpBL,yBAAa,IAAIC,IAAJ,GAAWC,OAAX,EALO;AAMpBC,kBAAM;AANc,SAAxB;AAQA,eAAOP,eAAP;AACH;;AAEDU,kBAAcC,GAAd,EAAkBhB,GAAlB,EAAsBiB,IAAtB,EAA2B;AACvBjB,YAAIQ,OAAJ,GAAcR,IAAIkB,IAAlB;AACA,cAAMC,MAAMnB,IAAIQ,OAAJ,CAAYY,IAAZ,CAAiBpB,GAAjB,CAAZ;AACAA,YAAIQ,OAAJ,GAAeP,IAAD,IAASkB,IAAI,KAAKpB,oBAAL,CAA0BC,GAA1B,EAA8BC,IAA9B,CAAJ,CAAvB;AACAgB;AACH;;AAEDI,gBAAYL,GAAZ,EAAgBhB,GAAhB,EAAoBiB,IAApB,EAAyB;AACrBjB,YAAIQ,OAAJ,GAAcR,IAAIkB,IAAlB;AACA,cAAMC,MAAMnB,IAAIQ,OAAJ,CAAYY,IAAZ,CAAiBpB,GAAjB,CAAZ;AACAA,YAAIc,KAAJ,GAAab,IAAD,IAASkB,IAAI,KAAKpB,oBAAL,CAA0BC,GAA1B,EAA8BC,IAA9B,CAAJ,CAArB;AACAgB;AACH;AAxC+B;AA0CpC,MAAMK,mBAAmBxB,6BAAzB;AACA,eAAewB,gBAAf","file":"append-express-response-property.js","sourcesContent":["class AppendExpressResponseProperty {\r\n    transformSuccessBody(res,body = {}){\r\n        const message = body.message;\r\n        Reflect.deleteProperty(body,'message');\r\n\r\n        const transformedBody = {\r\n            status: res.statusCode,\r\n            success: true,\r\n            message,\r\n            requestTime: new Date().getTime(),\r\n            data: body.data ?body.data : body\r\n        }\r\n        return transformedBody\r\n    }\r\n\r\n    transformErrorBody(res,body){\r\n        const {status,message,error} = body\r\n        const transformedBody = {\r\n            status,\r\n            success: true,\r\n            message,\r\n            error,\r\n            requestTime: new Date().getTime(),\r\n            data: {}\r\n        }\r\n        return transformedBody\r\n    }\r\n\r\n    appendSuccess(req,res,next){\r\n        res.success = res.json\r\n        const old = res.success.bind(res)\r\n        res.success = (body)=> old(this.transformSuccessBody(res,body))\r\n        next()\r\n    }\r\n\r\n    appendError(req,res,next){\r\n        res.success = res.json\r\n        const old = res.success.bind(res)\r\n        res.error = (body)=> old(this.transformSuccessBody(res,body))\r\n        next()\r\n    }\r\n}\r\nconst ResponseProperty = AppendExpressResponseProperty\r\nexport default ResponseProperty\r\n"]}